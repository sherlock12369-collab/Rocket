{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/coding/rocket/app/cart/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useCart } from '@/context/CartContext';\r\nimport { useSession } from 'next-auth/react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function CartPage() {\r\n    const { cart, removeFromCart, updateQuantity, clearCart, totalPrice, cartCount } = useCart();\r\n    const { data: session } = useSession();\r\n    const router = useRouter();\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Î∞∞ÏÜ°ÎπÑ Î°úÏßÅ: Í∏∞Î≥∏ 2Ìè¨Ïù∏Ìä∏, 15Ìè¨Ïù∏Ìä∏ Ïù¥ÏÉÅ Íµ¨Îß§ Ïãú Î¨¥Î£å\r\n    const shippingFee = totalPrice >= 15 || cartCount === 0 ? 0 : 2;\r\n    const finalPrice = totalPrice + shippingFee;\r\n\r\n    const handleOrder = async () => {\r\n        if (!session) {\r\n            alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');\r\n            router.push('/auth/login');\r\n            return;\r\n        }\r\n\r\n        if (cart.length === 0) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch('/api/orders', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    items: cart,\r\n                    shippingFee,\r\n                    totalPrice: finalPrice,\r\n                }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                alert('Ï£ºÎ¨∏Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§! üöÄ');\r\n                clearCart();\r\n                router.push('/profile');\r\n            } else {\r\n                const error = await res.json();\r\n                alert(error.error || 'Ï£ºÎ¨∏ Ïã§Ìå®');\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert('Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen pt-24 pb-20 px-6 max-w-4xl mx-auto\">\r\n            <div className=\"flex justify-between items-center mb-8\">\r\n                <h1 className=\"text-3xl font-black text-gradient uppercase tracking-tighter\">Î≥¥Í∏âÏ∞ΩÍ≥† üõí</h1>\r\n                <Link href=\"/\" className=\"text-sm font-bold text-slate-400 hover:text-white transition-colors\">\r\n                    ‚Üê ÌÉêÏÇ¨ Í≥ÑÏÜçÌïòÍ∏∞\r\n                </Link>\r\n            </div>\r\n\r\n            {cart.length === 0 ? (\r\n                <div className=\"glass-card py-20 text-center\">\r\n                    <span className=\"text-6xl mb-6 block opacity-20\">üì¶</span>\r\n                    <p className=\"text-slate-400 font-medium mb-8\">Ïû•Î∞îÍµ¨ÎãàÍ∞Ä ÎπÑÏñ¥ ÏûàÏäµÎãàÎã§.</p>\r\n                    <Link href=\"/\" className=\"btn-rocket\">\r\n                        ÏïÑÏù¥ÌÖú ÎëòÎü¨Î≥¥Í∏∞\r\n                    </Link>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                    <div className=\"lg:col-span-2 space-y-4\">\r\n                        {cart.map((item) => (\r\n                            <div key={item.productId} className=\"glass-card p-4 flex gap-4 items-center group\">\r\n                                <div className=\"w-20 h-20 rounded-2xl overflow-hidden bg-white/5 flex-shrink-0 border border-white/10\">\r\n                                    <img src={item.image} alt={item.title} className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\" />\r\n                                </div>\r\n                                <div className=\"flex-grow\">\r\n                                    <div className=\"flex justify-between items-start mb-1\">\r\n                                        <h3 className=\"font-bold text-base group-hover:text-[var(--accent)] transition-colors\">{item.title}</h3>\r\n                                        <button\r\n                                            onClick={() => removeFromCart(item.productId)}\r\n                                            className=\"text-slate-500 hover:text-red-500 transition-colors p-1\"\r\n                                        >\r\n                                            ‚úï\r\n                                        </button>\r\n                                    </div>\r\n                                    <div className=\"flex items-center justify-between mt-3\">\r\n                                        <div className=\"flex items-center bg-white/5 border border-white/10 rounded-xl overflow-hidden\">\r\n                                            <button\r\n                                                onClick={() => updateQuantity(item.productId, item.quantity - 1)}\r\n                                                className=\"px-3 py-1 hover:bg-white/10 text-slate-400 hover:text-white transition-colors font-bold\"\r\n                                            >-</button>\r\n                                            <span className=\"px-3 text-sm font-black w-10 text-center\">{item.quantity}</span>\r\n                                            <button\r\n                                                onClick={() => updateQuantity(item.productId, item.quantity + 1)}\r\n                                                className=\"px-3 py-1 hover:bg-white/10 text-slate-400 hover:text-white transition-colors font-bold\"\r\n                                            >+</button>\r\n                                        </div>\r\n                                        <span className=\"font-black text-[var(--accent)]\">{(item.price * item.quantity).toLocaleString()} P</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n\r\n                        <button\r\n                            onClick={clearCart}\r\n                            className=\"text-xs font-bold text-slate-500 hover:text-red-400 transition-colors uppercase tracking-widest pl-2\"\r\n                        >\r\n                            Ï†ÑÏ≤¥ ÎπÑÏö∞Í∏∞\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"glass-card p-6 border-white/20 ring-1 ring-white/5\">\r\n                            <h2 className=\"text-xl font-black mb-6 border-b border-white/10 pb-4\">Í≤∞Ï†ú Ï†ïÎ≥¥</h2>\r\n                            <div className=\"space-y-4 mb-6\">\r\n                                <div className=\"flex justify-between text-sm text-slate-400 uppercase font-bold tracking-tight\">\r\n                                    <span>ÏïÑÏù¥ÌÖú Ìï©Í≥Ñ</span>\r\n                                    <span className=\"text-white\">{totalPrice.toLocaleString()} P</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between text-sm text-slate-400 uppercase font-bold tracking-tight\">\r\n                                    <span>Î∞∞ÏÜ°ÎπÑ</span>\r\n                                    <span className={shippingFee === 0 ? 'text-green-400' : 'text-white'}>\r\n                                        {shippingFee === 0 ? 'FREE' : `${shippingFee} P`}\r\n                                    </span>\r\n                                </div>\r\n                                {shippingFee > 0 && (\r\n                                    <p className=\"text-[10px] text-[var(--primary)] font-bold italic\">\r\n                                        üí° 15P Ïù¥ÏÉÅ Ï£ºÎ¨∏ Ïãú Î∞∞ÏÜ°ÎπÑ Î©¥Ï†ú!\r\n                                    </p>\r\n                                )}\r\n                                <div className=\"pt-4 border-t border-white/10 flex justify-between items-end\">\r\n                                    <span className=\"text-sm font-black uppercase tracking-widest text-slate-300\">ÏµúÏ¢Ö ÏÇ¨Ïö© Ìè¨Ïù∏Ìä∏</span>\r\n                                    <span className=\"text-2xl font-black text-gradient\">{finalPrice.toLocaleString()} P</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleOrder}\r\n                                disabled={loading}\r\n                                className=\"w-full btn-rocket py-4 text-sm tracking-widest uppercase shadow-[0_0_30px_rgba(255,77,0,0.2)]\"\r\n                            >\r\n                                {loading ? 'ÌÜµÏã† Ï§ë...' : 'ÏûÑÎ¨¥ ÏãúÏûë (Ï£ºÎ¨∏ÌïòÍ∏∞)'}\r\n                            </button>\r\n\r\n                            <p className=\"text-center text-[9px] text-slate-500 mt-6 leading-relaxed font-bold uppercase tracking-tight\">\r\n                                * Ï£ºÎ¨∏ Ïãú Ï¶âÏãú Ìè¨Ïù∏Ìä∏Í∞Ä Ï∞®Í∞êÎêòÎ©∞,<br />\r\n                                Î∂ÄÎ™® ÎåÄÏõêÏùò ÏäπÏù∏ ÌõÑ Î∞∞ÏÜ°Ïù¥ ÏãúÏûëÎê©ÎãàÎã§.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"glass-card p-6 bg-[var(--primary)]/5 border-[var(--primary)]/20\">\r\n                            <div className=\"flex items-center gap-3 mb-2\">\r\n                                <span className=\"text-xl\">üßë‚ÄçüöÄ</span>\r\n                                <h4 className=\"text-sm font-black text-[var(--primary)] uppercase\">ÎåÄÏõê Ï†ïÎ≥¥</h4>\r\n                            </div>\r\n                            <p className=\"text-xs text-slate-400 font-medium\">\r\n                                ÌòÑÏû¨ Î°úÍ∑∏Ïù∏Ìïú ÎåÄÏõê: <span className=\"text-white font-bold\">{session?.user?.name || 'GUEST'}</span>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}